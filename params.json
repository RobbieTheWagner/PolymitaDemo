{"name":"Polymitademo","tagline":"A shipping demo using BRMS, BPM, Polymita, and JBoss.","body":"PolymitaDemo\r\n============\r\n\r\nThis is a shipping demo using BRMS, BPM, Polymita, and JBoss. You can create shipments, add containers to those shipments\r\nand add items to each of those containers. Items can have different weights, HazMat classes, and descriptions. If a\r\nhazardous item is added to the container, it kicks off a human task in jBPM, in which the item will need approval. Based on\r\nthis information, the items are priced using BRMS, each container is assigned a price based on the items, and the total shipment\r\ngets a price based on all of the containers. This information is then all passed back to Java and reflected in the\r\nBill of Lading table, and can be exported to PDF if desired.\r\n\r\nThis README will tell you how to install this demo. It will also go through a few sample usages of the program.\r\n\r\nHere is a sample video going through the installation of this demo:\r\n<iframe src=\"//player.vimeo.com/video/74146491\" width=\"500\" height=\"280\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> <p><a href=\"http://vimeo.com/74146491\">Polymita Demo Installation</a> from <a href=\"http://vimeo.com/user20737457\">Robert Wagner</a> on <a href=\"https://vimeo.com\">Vimeo</a>.</p>\r\n\r\n## Table of Contents\r\n###Installation\r\n[Step 1: Clone The Repo](#step1) \r\n\r\n[Step 2: Download Source .zip Files](#step2)\r\n\r\n[Step 3: Install Maven](#step3)\r\n\r\n[Step 4: Transfer Maven settings.xml and Build Project](#step4)\r\n\r\n[Step 5: Install and Run PostgreSQL](#step5)\r\n\r\n[Step 6: Setup Server and Define Runtimes](#step6)\r\n\r\n[Step 7: Import the Project](#step7)\r\n\r\n[Step 8: Upload Resources to Guvnor](#step8)\r\n\r\n[Step 9: Run the PolymitaDemo app](#step9)\r\n\r\n[Step 10: Configure Polymita](#step10)\r\n\r\n[Notes](#notes)\r\n\r\n###Usage\r\n[App](#app)\r\n\r\n[BPM](#bpm)\r\n\r\n[Polymita](#polymita)\r\n\r\n## <a name=\"step1\"/> Step 1: Clone The Repo\r\nClone this repo into your **~/Downloads** folder.\r\n```bash\r\ncd ~/Downloads\r\ngit clone https://github.com/rwwagner90/PolymitaDemo.git\r\n```\r\n\r\n## <a name=\"step2\"/> Step 2: Download Source .zip Files \r\nDownload the following from the JBoss Customer Portal at access.redhat.com\r\n\r\n **EAP6 (jboss-eap-6.1.0.zip)**\r\n \r\n **BRMS deployable (brms-p-5.3.1.GA-deployable-ee6.zip)**\r\n\r\nCopy these files to the installs directory in the root of this repo and ensure that they are executable by running:\r\n\r\n```bash\r\nchmod +x ~/Downloads/PolymitaDemo/installs/jboss-eap-6.1.0.zip\r\nchmod +x ~/Downloads/PolymitaDemo/installs/brms-p-5.3.1.GA-deployable-ee6.zip\r\n```\r\n\r\n## <a name=\"step3\"/> Step 3: Install Maven\r\nMake sure you have Maven installed on your machine.\r\n```bash\r\nmvn --version\r\n```\r\n\r\nIf you have it installed, you will see output similar to:\r\n```bash\r\nApache Maven 3.0.3 (r1075438; 2011-02-28 12:31:09-0500)\r\nMaven home: /usr/share/maven\r\nJava version: 1.6.0_51, vendor: Apple Inc.\r\nJava home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\r\nDefault locale: en_US, platform encoding: MacRoman\r\nOS name: \"mac os x\", version: \"10.8.4\", arch: \"x86_64\", family: \"mac\"\r\n```\r\n\r\nIf you do not have it installed, you can find instructions on how to install it online. \r\nOne specific source is [here](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html), but \r\nthere are other tutorials you can find.\r\n\r\n## <a name=\"step4\"/> Step 4: Transfer Maven settings.xml and Build Project\r\nCopy the settings.xml file in the root of this repo to your **~/.m2** folder.\r\n\r\n```bash\r\ncp ~/Downloads/PolymitaDemo/settings.xml ~/.m2/\r\n```\r\n\r\nThen you are ready to build the project. Run the init.sh script in the root of your repository folder and it will build.\r\n\r\n```bash\r\nsh ~/Downloads/PolymitaDemo/init.sh\r\n```\r\n\r\n## <a name=\"step5\"/> Step 5: Install and Run PostgreSQL\r\n1. Go [here](http://www.postgresql.org/download/) and download the PostgreSQL that works with your system and follow the instructions to get it running.\r\n2. Start the PostgreSQL service with the template1 database and create a polymita user for the polymita table.\r\n\r\nIn bash, start psql by running:\r\n```bash\r\npsql template1\r\n```\r\n\r\nExecute the following once you are running psql.\r\n```sql\r\nCREATE USER polymita WITH PASSWORD 'polymita';\r\nDROP DATABASE IF EXISTS polymita;\r\nCREATE DATABASE polymita;\r\nALTER DATABASE polymita OWNER TO polymita; \r\n```\r\n\r\nNow start the psql service. If you are on linux, use the following command:\r\n```bash\r\nsudo service postgresql start\r\n```\r\n\r\nIf you are not on linux, look around the documentation of the PostgreSQL instance you installed for how to start it.\r\n\r\n## <a name=\"step6\"/> Step 6: Setup Server and Define Runtimes\r\n\r\n### Setup EAP 6 Server in JBoss Developer Studio\r\n\r\n1. Select the Servers view. If it is currently not open, select **Window → Show View → Other** and search for the Servers view.\r\n2. Right click the white space in the Servers view and choose **New → Server**.\r\n3. Select JBoss Enterprise Application Platform 6.1.\r\n4. Set the following values:\r\n  * Server's host name: **localhost**\r\n  * Server Name: **JBoss EAP 6.1**\r\n  * For Server Runtime Environment click **Add** Then set the following:\r\n  * Name: **JBoss EAP 6.1 Runtime**\r\n  * Home Directory: **~/Downloads/PolymitaDemo/target/jboss-eap6.1**\r\n  * JRE: Choose 1.7.x, whichever version of Java 7 you prefer.\r\n  * Configuration file: **standalone.xml**.\r\n  * **Note:** If this runtime was automatically detected earlier and created, you may just use it instead of making a new one.\r\n7. Click Finish.\r\n\r\n### Install SOA Tools\r\n\r\nSelect **Help → Install New Software** and add the SOA Tools update site **https://devstudio.jboss.com/updates/5.0/central/soa-tooling/**\r\n\r\nSelect **Business Rules Tooling** and **SOA and Data Services Tooling** (all sub-menu items will be selected) and proceed through installation and restart JBoss Developer Studio to complete the installation. \r\n\r\nYou will be told to restart JBoss Developer Studio for the changes to take effect, do this now.\r\n\r\n### Detect and add a BRMS 5.3.1 runtime environment\r\n\r\n1. Select **Window → Preferences**.\r\n2. Click the plus sign to expand **JBoss Tools** and then select **JBoss Runtime Detection**.\r\n3. Select the **Add** button and navigate to the **~/Downloads/PolymitaDemo/target** folder, then select OK.\r\n4. The jboss-eap-6.1 runtime created earlier should have been found and selected. If so, select OK.\r\n5. Select OK again to close the Preferences dialog window.\r\n\r\n### Detect and add jBPM BRMS 5.3.1 runtime environment\r\n\r\n1. Select **Window → Preferences**.\r\n2. Click the plus sign to expand **jBPM** and then select **Installed jBPM Runtimes**.\r\n3. If not automatically listed in the view: Select the **Add** button, then the **Create a new jBPM Runtime** button and navigate to the **~/Downloads/PolymitaDemo/target/jboss-eap-6.1** folder, then name the runtime **jBPM BRMS 5.3.1 runtime** and select OK.\r\n4. The **jBPM BRMS 5.3.1 runtime** should be selected. If so, select OK to close the Preferences dialog window. If not, click box to add check mark next to runtime and then select OK.\r\n5. If asked to restart JBoss Developer Studio for the changes to take effect, restart.\r\n\r\n### Detect and add Drools 5.3.1 runtime environment\r\n\r\n1. Select **Window → Preferences**.\r\n2. Click the plus sign to expand **Drools** and then select **Installed Drools Runtimes**.\r\n3. If not automatically listed in the view: Select the **Add** button, then the **Create a new Drools 5 Runtime** button and navigate to the **~/Downloads/PolymitaDemo/target/jboss-eap-6.1** folder, then name the runtime **Drools 5.3.1.Final runtime** and select OK.\r\n4. Select the **Drools 5.3.1.Final runtime**.\r\n5. In **Drools** in the left hand side menu select **Drools Flow nodes**, make sure all boxes are checked\r\nand select OK to close the Preferences dialog window.\r\n6. You will be told to restart JBoss Developer Studio for the changes to take effect, do this now.\r\n\r\n## <a name=\"step7\"/> Step 7: Import the Project\r\nImport the project into JBoss Developer Studio by clicking **File → Import** and choosing **General → Existing Projects into Workspace**.\r\nThen navigate to **~/Downloads/PolymitaDemo/PolymitaDemo** as the source folder. (Note the double PolymitaDemo/PolymitaDemo)\r\n\r\nThen we need to update the dependencies and such so everything will work.\r\n\r\nRight click the project folder and do **Maven → Update Project**, followed by **Run As → Maven Clean**, and then **Run As → Maven Install**. This should download all the required dependencies.\r\n\r\nNow that everything is updated, start the server so that Guvnor will be running for the next step. To do this, right\r\nclick the project and choose **Run As → Run on Server** and choose the **JBoss EAP 6.1** server and click finish.\r\n\r\n## <a name=\"step8\"/> Step 8: Upload Resources to Guvnor\r\n\r\n### Upload POJO Model\r\n\r\nSelect all the java files under **org.railinc.shipping** and then right click and choose **Export → Java → JAR file**.\r\n\r\nAll of the default options for saving the JAR will be fine, just save it somewhere you will remember.\r\n\r\nNext, navigate to **http://localhost:8080/jboss-brms** and login with Username: **admin** and Password: **admin**. \r\nThis is Guvnor that you are logging into, and it is where you will upload rules and flows.\r\n\r\nAfter logging in, it will ask you to import sample data because it is a new repository. **DO NOT** do this!\r\n\r\nThen click Knowledge Bases and then click **Create New → New Package** and call it **org.railinc.shipping**.\r\n\r\nStill in Knowledge Bases, click **Create New → Upload POJO**. Name it whatever you would like and click next. \r\nThen find the JAR you just made and upload it.\r\n\r\n### Upload Rules and Flows\r\n\r\n1. Add Guvnor to JBoss Developer Studio\r\n  * Click **Window → Open Perspective → Other → Guvnor Repository Exploring**\r\n  * Then click **File → New → Other → Guvnor → Guvnor repository location**\r\n  * The default info is fine for Location, Port, and Repository, and for User Name put **admin** and also for Password put **admin**.\r\n  * Click finish\r\n2. Upload rules to Guvnor\r\n  * In JBoss Developer Studio, navigate to **src/main/rules**.\r\n  * Select all .drl files, right click and go to **Guvnor → Add**\r\n  * Use your existing Guvnor, click next.\r\n  * Expand your Guvnor and select **packages/org.railinc.shipping** as the package to upload to.\r\n  * Click finish\r\n3. Upload flows to Guvnor\r\n  * In JBoss Developer Studio, navigate to **src/main/resources**.\r\n  * Select all .bpmn2 files, right click and go to **Guvnor → Add**\r\n  * Use your existing Guvnor, click next.\r\n  * Expand your Guvnor and select **packages/org.railinc.shipping** as the package to upload to.\r\n  * Click finish\r\n4. Add the item form\r\n  * In Guvnor, navigate to **Knowledge Bases → org → railinc → shipping**.\r\n  * Under the Assets tab open the processes dropdown and open **org.railinc.shipping.ItemFlow**\r\n  * In the ItemFlow window click the task called \"Hazard Human Check\"\r\n  * Click on the green shirted man directly above the task and a form editing window pops up\r\n  * In JBoss Developer Studio open up **src/main/resources/humanHazardCheck.html**\r\n  * copy-paste the contents into the process form window in guvnor and click save.\r\n5. PNG all flows\r\n  * Log in to Guvnor at **http://localhost:8080/jboss-brms** with the Username: **admin** and Password: **admin**.\r\n  * Click **Knowledge Bases → org → railinc → shipping** to navigate to the package.\r\n  * Now click **Assets → Processes** and click **Open** next to each process. This will open each one in a tab at the top.\r\n  * Now click each tab, and the flow will appear for that process.\r\n  * While viewing each flow, click the PNG button at the bottom to generate images needed by BRMS. You do not need to save the generated PNG file, it will save the images in assets by itself.\r\n  * After each PNG is generated, click **File → Save Changes**.\r\n6. Build the package\r\n  * In Guvnor, navigate to **Knowledge Bases → org → railinc → shipping**.\r\n  * Then click **Edit**.\r\n  * Click the **Validate Configuration** button, followed by the **Build Package** button and fix any errors that may arise.\r\n  * Click **File → Save Changes** to ensure the package that was built is saved.\r\n\r\n## <a name=\"step9\"/> Step 9: Run the PolymitaDemo app\r\n1. In JBoss Developer Studio, right click the project and choose **Run As → Run on Server**. \r\n2. Then select the runtime you previously set up, and wait for everything to start up.\r\n3. You should then be able to navigate to **http://localhost:8080/PolymitaDemo** and see the app!\r\n\r\n## <a name=\"step10\"/> Step 10: Configure Polymita\r\n\r\n## <a name=\"notes\"/> Notes \r\n* When you make changes, you must click the red stop button to stop the server, then do **Run As → Run on Server** again to redeploy.\r\n* You must PNG a flow after any changes for the Guvnor to realize the changes.\r\n* You must build your package again after all changes to make the changes go through.\r\n* You must have psql running whenever running the application, so you can access the databases.\r\n\r\n## <a name=\"app\"/> App \r\nThis video will show you how the PolymitaDemo app is used.\r\n<iframe src=\"//player.vimeo.com/video/74143875\" width=\"500\" height=\"313\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> <p><a href=\"http://vimeo.com/74143875\">Polymita App (Enhanced)</a> from <a href=\"http://vimeo.com/user20737457\">Robert Wagner</a> on <a href=\"https://vimeo.com\">Vimeo</a>.</p>\r\n\r\n## <a name=\"bpm\"/> BPM\r\nExplain how to use BPM.\r\n\r\n## <a name=\"polymita\"/> Polymita\r\nExplain how to use Polymita.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}